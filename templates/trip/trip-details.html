{% extends "base.html" %}

{% block title %}{{ trip.name }}{% endblock %}

{% block content %}
<div class="container">
	<h1 class="display-3 mt-2 mb-2">Trip: {{ trip.name }}</h1>
	<h4 >{{ days[0].month }} {{ days[0].day}}, {{ days[0].year }} - {{ days[-1].month }} {{ days[-1].day}}, {{ days[-1].year }}</h4>
	<div class="accordion mb-5" id="day-accordian">
		{% for day in days %}
			<div class="accordion-item">
				<h2 class="accordion-header" id="day{{ loop.index }}-heading">
					<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#day{{ loop.index }}" aria-expanded="true" aria-controls="day{{ loop.index }}">
					Day {{ loop.index }} - {{ day.dow }}, {{ day.month }} {{ day.day }}
					</button>
				</h2>
				<div id="day{{ loop.index }}" class="accordion-collapse collapse" aria-labelledby="day{{ loop.index }}-heading" >
					<div class="accordion-body">
						<div class="row">
							<div class="col-6">
								<h6>Campground</h6>
							</div>
							<div class="col-6">
								<h6>Parks You Plan to Visit</h6>
							</div>
						</div>
						<div class="row">
							<div class="col-6">
								<div class="dropdown">
									{% if day.stay %}
										<button class="btn btn-secondary dropdown-toggle btn-sm" type="button" id="campground-dropdown" data-bs-toggle="dropdown" aria-expanded="false">
											{{ day.stay.name }}
										</button>
									{% else %}
										<a class="btn btn-sm btn-info mt-3" href="" data-bs-toggle="modal" data-bs-target="#editModal" data-bs-dayid="{{ day.id }}" data-bs-type="campground-add">Add Campground</a>
									{% endif %}
									<ul class="dropdown-menu" aria-labelledby="campground-dropdown">
										<li>
											<a class="dropdown-item" target="_blank" href="/poi/{{ day.stay.id }}">More Information</a>
										</li>
										<li>
											<a class="dropdown-item" href="" data-bs-toggle="modal" data-bs-target="#editModal" data-bs-dayid="{{ day.id }}" data-bs-type="campground" data-bs-tripid="
											{{ trip.id }}">Change</a>
										</li>
										<li>
											<form action="/trips/{{ trip.id }}/stay" method="DELETE">
												<button type="submit" class="dropdown-item">Delete</button>
											</form>

										</li>
									</ul>
								</div>
							</div>
							<div class="col-6">
								{% for poi in day.pois %}
								<div class="dropdown">
									<button class="btn btn-secondary dropdown-toggle btn-sm" type="button" id="park-dropdown" data-bs-toggle="dropdown" aria-expanded="false">
										{{ poi.name }}
									</button>
									<ul class="dropdown-menu" aria-labelledby="park-dropdown">
										<li></li>
										<li>
											<a class="dropdown-item" target="_blank" href="/poi/{{ poi.id }}">More Information</a>
										</li>
										<li>
											<form action="/trips/{{ trip.id }}/poi/{{ poi.id }}" method="DELETE">
												<button type="submit" class="dropdown-item">Delete</button>
											</form>

										</li>
									</ul>
								</div>
								{% endfor %}
								<a class="btn btn-sm btn-info mt-3" href="" data-bs-toggle="modal" data-bs-target="#editModal" data-bs-dayid="{{ day.id }}" data-bs-type="park" data-bs-tripid="
								{{ trip.id }}">Add A Park</a>
							</div>
						</div>
					</div>
				</div>
			</div>
		{% endfor %}
	</div>
</div>

<!-- Modal -->
<div class="modal fade" id="editModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-scrollable">
	  <div class="modal-content">
		<div class="modal-header">
		  <h4 class="modal-title" id="editModalLabel"></h4>
		  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
		</div>
		<div class="modal-body"></div>
	  </div>
	</div>
  </div>

{% endblock %}
{% block scripts %}
<script src="/static/tripDetails.js"></script>
{% endblock %}

