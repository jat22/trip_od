{% extends "base.html" %}

{% block title %}{{ trip.name }}{% endblock %}

{% block content %}
<div class="container">
	<div class="card">
		<div class="card-body">
			<h2 class="card-title">{{ trip.name }}</h2>
			<h4 class="card-subtitle">{{ trip.days[0]["month"] }} {{ trip.days[0]["day"] }}, {{ trip.days[0]["year"] }} to {{ trip.days[-1]["month"] }} {{ trip.days[-1]["day"] }}, {{ trip.days[-1]["year"] }}</h4>
		</div>
	</div>
</div>

<div class="container">
	<div class="card">
		<div class="card-body">
			<h2 class="card-title">Campgrounds</h2>
			<a href="/trips/{{ trip.id }}/campgrounds" class="btn btn-md btn-secondary">More Campgrounds</a>
			<ul>
			{% for campground in trip.unassigned_cgs %}
				<li>
					<a href="/loctions/{{ campground.id }}">{{ campground.name }}</a>
					<form action="/trips/{{ trip.id }}/campground/delete" method="POST">
						<input type="hidden" value="{{ campground.id }}" name="ucampground-id">
						<button type="submit" class="btn btn-sm btn-danger">Remove</button>
					</form>
					<form action="/trips/{{ trip.id }}/campground/assign", method="POST">
						<select name="camp-day" id="day">
							<option value="">Pick A Day</option>
							{% for day in days %}
							<option value="{{ day.id }}">{{ day["dow"] }} {{ day["month"] }} {{ day["day"] }}, {{ day["year"] }}</option>
							{% endfor %}
						</select>
						<input type="hidden" name="location-id" value="{{ campground.id }}">
						<button type="submit" class="btn btn-sm btn-secondary">Add</button>
					</form>
				</li>
			{% endfor %}
			</ul>
		</div>
	</div>
	<div class="card">
		<div class="card-body">
			<h2 class="card-title">Activities</h2>
			<a href="/trips/{{ trip.id }}/activities" class="btn btn-md btn-secondary">More Activities</a>
			<ul>
			{% for act in trip.unassigned_acts %}
				<li>{{ act.activity.name }} @ 
					<a href="/loctions/{{ act.location.id }}">{{ act.location.name}}</a>
					<form action="/trips/{{ trip.id }}/activity/delete" method="POST">
						<input type="hidden" value="{{ act.id }}" name="uact-id">
						<button type="submit" class="btn btn-sm btn-danger">Remove</button>
					</form>
					<form action="/trips/{{ trip.id }}/activity/assign", method="POST">
						<select name="act-day" id="day">
							<option value="">Pick A Day</option>
							{% for day in days %}
							<option value="{{ day.id }}">{{ day["dow"] }} {{ day["month"] }} {{ day["day"] }}, {{ day["year"] }}</option>
							{% endfor %}
						</select>
						<input type="hidden" name="uact-id" value="{{ act.id }}">
						<button type="submit" class="btn btn-sm btn-secondary">Add</button>
					</form>
				</li>
			{% endfor %}
			</ul>
		</div>
	</div>
	<div class="card">
		<div class="card-body">
			<h2 class="card-title">Days</h2>
			<ul>
				{% for day in days %}
					<li>
						<div class="card">
							<div class="card-body">
								<h3 class="card-title">{{ day["dow"] }}</h3>
								<h6 class="card-subtitle">{{ day["month"] }} {{ day["day"] }}</h6>

									<div class="card">
										<div class="card-body">
											<h5 class="card-title">Campground</h5>
											{% if day.campground %}
											<h6> 
												<a href="/locations/{{ day.campground.id }}">{{ day.campground.name }}
												</a>
												<form action="/trips/{{ trip.id }}/campground/unassign" method="POST">
													<input type="hidden" value="{{ day.campground.id }}" name="campground-id">
													<input type="hidden" value="{{ day.id }}" name="day-id">
													<button type="submit" class="btn btn=sm btn-dark">Unassign</button>
												</form>
											</h6>
											{% endif %}
										</div>
									</div>
								
									<div class="card">
										<div class="card-body">
											<h5 class="card-title">Activities</h5>
											{% for act in  day.activities %}
											<h6> {{ act.activity }} @ 
												<a href="/locations/{{act.location_id}}">
													{{ act.location.name }}
												</a>
												<form action="/trips/{{ trip.id }}/activity/unassign" method="POST">
													<input type="hidden" value="{{ act.id }}" name="day-act-id">
													<button type="submit" class="btn btn=sm btn-dark">Unassign</button>
												</form>
											</h6>
											{% endfor %}
										</div>
									</div>	
								
							</div>
						</div>
						
					</li>
				{% endfor %}
			</ul>
		</div>
	</div>
</div>

{% endblock %}

<!-- <h4 class="card-subtitle">{{ dates[0]["month"] }} {{ dates[0]["day"] }}, {{ dates[0]["year"] }} to {{ dates[-1]["month"] }} {{ dates[-1]["day"] }}, {{ dates[-1]["year"] }}</h4> -->